

<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta charset="utf-8">



<!-- begin SEO -->









<title>motor-controller-highpower-motorshield - HOME</title>







<meta property="og:locale" content="en-US">
<meta property="og:site_name" content="HOME">
<meta property="og:title" content="motor-controller-highpower-motorshield">








  

  









  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "person",
      "name" : "g3rald",
      "url" : null,
      "sameAs" : null
    }
  </script>






<!-- end SEO -->

<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="HOME Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico">
<meta http-equiv="cleartype" content="on">

    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="/">HOME</a></li>
          
            
            <li class="masthead__menu-item"><a href="/components/">Components</a></li>
          
            
            <li class="masthead__menu-item"><a href="/about/">ABOUT ROBOCUP-RESCUE</a></li>
          
            
            <li class="masthead__menu-item"><a href="/team/">TEAM</a></li>
          
            
            <li class="masthead__menu-item"><a href="/credits/">WEBSITE CREDITS</a></li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    





<div id="main" role="main">
  


  <div class="sidebar sticky">
  
  
    
      
      
      
    
    
      


<nav class="nav__list">
  
  <ul>
    
      <li>
        
          
          

          <a href="/components/"><span class="nav__sub-title">Components</span></a>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/components/ros-on-nuc/" class="">Ros on Intel-NUC</a></li>
          
            
            

            
            

            <li><a href="/components/imu/" class="">IMU</a></li>
          
            
            

            
            

            <li><a href="/components/motor-controller/" class="active">Motor-Controller</a></li>
          
            
            

            
            

            <li><a href="/components/spotlight/" class="">Spotlight</a></li>
          
            
            

            
            

            <li><a href="/components/buck-converter/" class="">Buck-Converter</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>



    
  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="motor-controller-highpower-motorshield">
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">motor-controller-highpower-motorshield
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        <p>##1. Introduction
This motor-controller-package based on rosserial_arduino 
brings support for the brushed motor controller based on the LXRobotics Highpower Motorshield to ROS (Robot Operating System) 
and can be easily adapted for other motor-shields.</p>

<p><strong>1.2. Features</strong>
* Own message-type for speed which can be adapted for individual needs.
* Includes a heartbeat-service that calls a user-specific task if the arduino is disconnected from ROS. For example: stop the motor if ROS does not respond.</p>

<p><strong>1.3. Overview</strong>
<img src="https://raw.githubusercontent.com/AR2A/motor-controller-highpower-motorshield/master/doc/img/schematic_overview.png" alt="alt tag" /></p>

<p><strong>1.4. Dependencies</strong></p>

<p>This software is built on the Robotic Operating System (ROS - Indigo) and on the Arduino IDE, which needs to be installed first. For further information how to install ROS see http://wiki.ros.org/indigo/Installation and for how to run the Arduino IDE directly in ROS see section 3.Installing the Software on http://wiki.ros.org/rosserial_arduino/Tutorials/Arduino%20IDE%20Setup</p>

<p>##2. How to Install
In order to install the motor controller, clone the latest version from the repository into your catkin workspace, compile the packages and upload to the Arduino Uno using ROS.</p>

<p><strong>2.1.Download the Source Code</strong></p>

<p>Move to the src-folder in your catkin-workspace:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ cd ~/catkin_ws/src/
</code></pre>
</div>

<p>Clone the repository:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ git clone https://github.com/AR2A/motor-controller-highpower-motorshield
</code></pre>
</div>

<p><strong>2.2. Build the Packages</strong></p>

<p>Travis Build Status:</p>

<p><a href="https://travis-ci.org/AR2A/motor-controller-highpower-motorshield"><img src="https://travis-ci.org/AR2A/motor-controller-highpower-motorshield.svg?branch=master" alt="Build Status" /></a></p>

<p>Move to your catkin-workspace:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ cd ~/catkin_ws/
</code></pre>
</div>

<p>Compile the packages:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ catkin_make
</code></pre>
</div>

<p>If you can’t generate the custom messages, please run the following commands:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ catkin_make arduino_motor_control_generate_messages
$ source devel/setup.bash
$ cd src/motor-controller-highpower-motorshield/arduino_motor_control/firmware/
$ rm -r ros_lib/
$ rosrun rosserial_arduino make_libraries.py .
$ cd ~/catkin_ws
$ catkin_make 
</code></pre>
</div>

<p><strong>2.3 Upload to the Arduino Uno</strong></p>

<p>Now connect an Arduino Uno, confirm that it comes up as /dev/ttyACM1 (or change the firmware’s CMakeLists.txt accordingly), and program it:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ catkin_make arduino_motor_control-upload
</code></pre>
</div>

<p>##3. How to Launche
Move to your catkin-workspace:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ cd ~/catkin_ws/
</code></pre>
</div>

<p>To add the workspace to your ROS environment you need to source the generated setup file:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ source devel/setup.bash
</code></pre>
</div>

<p>You can launch the motor controller node with:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ roslaunch motor_startup motor_startup.launch
</code></pre>
</div>

<p>##4. ROS API</p>

<p><strong>4.1. Node: arduino_motor_control</strong></p>

<p>This Node runs directly on the Arduino Uno, monitors the current power consumption, controls the motor and includes a heartbeat-service that calls a user-specific task if the arduino is disconnected from ROS.</p>

<p>4.1.1. Subscribed Topics
* speed (arduino_motor_control/speed):</p>

<p>4.1.2. Published Topics
* current (arduino_motor_control/current):</p>

<p>4.1.3. Services
* heartbeat (arduino_motor_control/heartbeat):</p>

<p><strong>4.2. Node: motor_control_heartbeat_client</strong></p>

<p>This is the Heartbeat-Client and runs on the main ROS-System.</p>

<p>4.2.1 Needed Services
* heartbeat (arduino_motor_control/heartbeat):</p>

<p><strong>4.3. Node: motor_startup</strong></p>

<p>Contains the launch file.</p>

<p>##5. Bugs &amp; Feature Requests</p>

<p>Please report bugs and request features using the <a href="https://github.com/AR2A/motor-controller-highpower-motorshield/issues">Issue Tracker</a>.</p>


        
      </section>

      <footer class="page__meta">
        
        




        
      </footer>

      

      


    </div>

    
  </article>

  
  
</div>

    <div class="page__footer">
      <footer>
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
    
    
    
    <li><a href="/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2016 g3rald. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>
      </footer>
    </div>

    <script src="/assets/js/main.min.js"></script>




    <!-- start custom footer snippets -->

<!-- end custom footer snippets -->

  </body>
</html>

